{
  "application": "rps-app",
  "spec": {
    "email": "andrew.way@armory.io"
  },
  "globals": {
    "waitTime": "10"
  },
  "deleteStalePipelines": false,
  "pipelines": [
    {
      "application": "rps-app",
      "name": "My First K8s Pipeline (gitops)",
      "keepWaitingPipelines": false,
      "lastModifiedBy": "away168",
      "limitConcurrent": true,
      "parameterConfig": [
        {
          "default": "${trigger.user}",
          "description": "",
          "hasOptions": false,
          "label": "",
          "name": "user",
          "options": [
            {
              "value": ""
            }
          ],
          "pinned": true,
          "required": true
        },
        {
          "default": "v0.1.2",
          "description": "",
          "hasOptions": true,
          "label": "",
          "name": "tag",
          "options": [
            {
              "value": "v1.0.0"
            },
            {
              "value": "v0.1.2"
            },
            {
              "value": "v0.1.1"
            }
          ],
          "pinned": true,
          "required": true
        }
      ],
      "spelEvaluator": "v4",
      "stages": [
        {{ module "deploy.artifact.v1"
           "account" "dev-us-west-2"
           "application" "rps-app"
           "namespace" "dev"
           "artifactName" "gitops/manifests/service.yml"
           "reference" "https://api.github.com/repos/away168/RPS-App/contents/gitops/manifests/service.yml"
           "name" "deploy LB"
        }},
        {
          "account": "dev-us-west-2",
          "cloudProvider": "kubernetes",
          "manifestArtifact": {
            "artifactAccount": "github",
            "id": "11cfeab0-55c7-41e9-9ea2-69e54f4d807a",
            "name": "gitops/manifests/configmap.yml",
            "reference": "https://api.github.com/repos/away168/RPS-App/contents/gitops/manifests/configmap.yml",
            "type": "github/file"
          },
          "moniker": {
            "app": "rps-app"
          },
          "name": "Deploy CM",
          "namespaceOverride": "dev",
          "refId": "2",
          "requisiteStageRefIds": [
            "deploy LB"
          ],
          "skipExpressionEvaluation": false,
          "source": "artifact",
          "trafficManagement": {
            "enabled": false,
            "options": {
              "enableTraffic": false,
              "services": []
            }
          },
          "type": "deployManifest"
        },
        {
          "account": "dev-us-west-2",
          "cloudProvider": "kubernetes",
          "manifestArtifact": {
            "artifactAccount": "github",
            "id": "235823c8-5a22-4177-b2c9-2270175039da",
            "name": "gitops/manifests/deployment.yml",
            "reference": "https://api.github.com/repos/away168/RPS-App/contents/gitops/manifests/deployment.yml",
            "type": "github/file"
          },
          "moniker": {
            "app": "rps-app"
          },
          "name": "Deploy (Manifest)",
          "namespaceOverride": "dev",
          "refId": "3",
          "requiredArtifactIds": [],
          "requiredArtifacts": [
            {
              "artifact": {
                "artifactAccount": "docker-registry",
                "id": "e3085766-8f2d-4166-9802-352bb82697ff",
                "name": "away168/rps",
                "reference": "away168/rps:${parameters.tag}",
                "type": "docker/image",
                "version": "${parameters.tag}"
              }
            }
          ],
          "requisiteStageRefIds": [
            "2"
          ],
          "skipExpressionEvaluation": false,
          "source": "artifact",
          "trafficManagement": {
            "enabled": false,
            "options": {
              "enableTraffic": false,
              "services": []
            }
          },
          "type": "deployManifest"
        }
      ],
      "triggers": [],
      "updateTs": "1589949805000"
    }
  ]
}